(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1383:function(e,l,t){Promise.resolve().then(t.bind(t,9294))},9294:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return x}});var n=t(7437),r=t(7138),s=t(2265);class a{save(e){let l=this.getAll();if(!l){console.log("No local storage returned");return}l[e.id.toString()]=e,localStorage.setItem("json-saved",JSON.stringify(l))}get(e){let l=localStorage.getItem("json-saved");return l?JSON.parse(l)[e]||null:(console.log("No local storage returned"),null)}getAll(){try{let e=localStorage.getItem("json-saved");if(!e)return console.log("No item was founded"),null;return JSON.parse(e)}catch(e){return console.log(e),null}}delete(e){try{let l=localStorage.getItem("json-saved");if(!l){console.log("No item was founded");return}let t=JSON.parse(l);delete t[e],localStorage.setItem("json-saved",JSON.stringify(t))}catch(e){console.log(e);return}}}function i(e){let l={warning:"bg-orange-300 hover:bg-orange-500",success:"bg-green-300 hover:bg-green-500",primary:"bg-blue-300 hover:bg-blue-500",secondary:"bg-amber-300 hover:bg-amber-500",danger:"bg-red-300 hover:bg-red-500"}[e.type];return(0,n.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"p-3 w-full h-full rounded cursor transition ease-in-out text-white ".concat(l),children:e.children})}var o=t(6920),d=t(5664),c=t(3541);function u(e){let[l,t]=s.useState(null);(0,s.useEffect)(()=>{},[e.values]);let r={editable:!1,enableClipboard:!1,maxDisplayLength:1,displayDataTypes:!1,displaySize:!1,enableAdd:!1,enableDelete:!1};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"bg-gray-200",children:(0,n.jsx)("p",{className:"text-2xl m-4 h-10 text-black",children:"R\xe9cents"})}),(0,n.jsx)("div",{className:"bg-white text-gray-600 rounded p-4 h-2/3 overflow-scroll",children:(0,n.jsx)("div",{className:"h-full",children:e.values&&Object.entries(e.values).map((s,a)=>{let[i,u]=s;return(0,n.jsxs)("div",{className:"flex flex-col w-full mb-6 \n                     hover:bg-blue-200 hover:text-white\n                     ".concat(l===a?"bg-blue-300 text-white":""," \n                     cursor-pointer p-2 rounded"),onClick:()=>{e.onEditJson(u),t(u.id)},children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between mb-2",children:[(0,n.jsx)("span",{children:u.title.length>24?u.title.slice(0,24)+"...":u.title}),(0,n.jsx)("div",{className:"flex gap-4",children:(0,n.jsxs)("div",{className:"flex gap-1 items-center cursor-pointer",children:[(0,n.jsx)(o.G,{icon:d.Y}),"Edit"]})})]}),(0,n.jsx)("div",{className:"overflow-scroll",children:(0,n.jsx)(c.he,{...r,value:u.data})})]},a)})})})]})}function v(e){return(0,s.useEffect)(()=>{console.log("props.values Sidebar",e.values)},[e.values]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"h-full w-full max-w-lg bg-gray-100 flex flex-col border-r border-r-gray-200",children:(0,n.jsx)(u,{values:e.values,onEditJson:l=>e.onEditJson(l)})})})}function h(e){let l=(0,s.useRef)(!1),r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{var l;console.log("props.values JsonEditor",e.data,r.current),null===(l=r.current)||void 0===l||l.update(e.data)},[e.data]),(0,s.useEffect)(()=>{t.e(658).then(t.t.bind(t,6194,23)).then(t=>{if(l.current)return;console.log("JSONEditor ----->",t);let n=t.default,s=document.getElementById("jsoneditor");if(!s){console.log("Could not find JSON Editor");return}console.log("JSONEditor options",e),r.current=new n(s,{mode:"code",onChange:async()=>{var l,t,n;console.log("JSONEditor onChange",null===(l=r.current)||void 0===l?void 0:l.getText());let s=await (null===(t=r.current)||void 0===t?void 0:t.validate());if(s&&s.length>0){console.log("errors",s);return}e.onChange(null===(n=r.current)||void 0===n?void 0:n.get())}},e.data),l.current=!0})},[e]),(0,n.jsx)("div",{id:"jsoneditor",className:"w-full h-full"})}var f=t(2681);function g(e){let l=new a,t=(0,s.useRef)(null),r=(0,s.useRef)(null),[d,c]=(0,s.useState)({}),u=(0,s.useRef)(null);(0,s.useEffect)(()=>{var l;t.current&&(null===(l=e.data)||void 0===l?void 0:l.title)&&(t.current.value=e.data.title,console.log("JsonCreate --- props.data",e.data),c(e.data.data))},[e.data]);let v=()=>{var e;r.current=null,c({}),(null===(e=t.current)||void 0===e?void 0:e.value)&&(t.current.value="")};return(0,n.jsxs)("div",{className:"h-full",children:[(0,n.jsxs)("div",{className:"flex text-black items-center justify-between h-14 mb-3",children:[(0,n.jsx)("span",{className:"text-xl",children:"Title"}),(0,n.jsx)("input",{onChange:e=>{var l,t,n;if(0===e.target.value.length){null===(t=u.current)||void 0===t||t.classList.remove("hidden");return}(null===(l=u.current)||void 0===l?void 0:l.classList.contains("hidden"))||null===(n=u.current)||void 0===n||n.classList.add("hidden")},ref:t,className:"w-2/4 border-none bg-gray-100 rounded h-full pl-3",type:"text",maxLength:200,placeholder:"Enter a new title"}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("div",{className:"w-24",children:(0,n.jsx)(i,{type:"primary",onClick:()=>{var n,s,a,i,o;if(!(null===(n=t.current)||void 0===n?void 0:n.value)){console.log("Title is required",t.current),null===(i=t.current)||void 0===i||i.focus(),null===(o=u.current)||void 0===o||o.classList.remove("hidden");return}let c=r.current||d;if(!c){console.log("Data is required",c);return}let v={id:(null===(s=e.data)||void 0===s?void 0:s.id.toString())||crypto.randomUUID(),title:t.current.value,data:c};l.save(v),null===(a=e.onAdd)||void 0===a||a.call(e,v.id)},children:"Save"})}),(0,n.jsx)("div",{className:"w-24",children:(0,n.jsx)(i,{type:"danger",onClick:()=>{var l,t,n,r;if(console.log("delete",null===(l=e.data)||void 0===l?void 0:l.id),!(null===(t=e.data)||void 0===t?void 0:t.id)){console.log("ID is required",null===(r=e.data)||void 0===r?void 0:r.id);return}null===(n=e.onDelete)||void 0===n||n.call(e,e.data.id.toString()),v()},children:(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(o.G,{icon:f.g8,size:"xl"}),"Delete"]})})})]})]}),(0,n.jsx)("div",{className:"my-3",children:(0,n.jsx)("p",{className:"bg-red-500 p-3 hidden",ref:u,children:"Title is required"})}),(0,n.jsx)(h,{data:d,onChange:e=>{console.log("onChange",e),r.current=e}})]})}function x(){let[e,l]=(0,s.useState)([]),[t,o]=(0,s.useState)("edit"),[d,c]=(0,s.useState)(null),u=new a;(0,s.useEffect)(()=>{x()},[]);let h=e=>{x()},f=e=>{u.delete(e),x()},x=()=>{let e=u.getAll();e&&c(e)};return(0,n.jsxs)("main",{children:[(0,n.jsxs)("nav",{className:"py-2 border-b border-gray-200 pr-12 flex items-center gap-12 justify-end w-full bg-white",children:[(0,n.jsx)(r.default,{href:"/",className:"text-black",children:"Home"}),(0,n.jsx)("div",{className:"w-64",children:(0,n.jsx)(i,{type:"primary",onClick:()=>o("edit"),children:"Create a new json"})})]}),(0,n.jsxs)("div",{className:"flex h-full",children:[(0,n.jsx)(v,{values:d,updateCurrentStatus:e=>o(e),onEditJson:e=>(function(e){if(!e){console.log("No item to display");return}o("view"),l(l=>[e])})(e)}),(0,n.jsxs)("div",{className:"w-full h-full",children:[(0,n.jsx)("div",{className:"bg-gray-500 w-full p-4",children:(0,n.jsx)("h1",{className:"text-white text-center text-4xl",children:"JSON Saver"})}),(0,n.jsxs)("div",{className:"h-full p-3",children:["view"===t&&(0,n.jsx)("div",{className:"w-full h-full bg-white overflow-scroll max-h-full",children:e.length>0?(0,n.jsx)("div",{className:"flex h-full",children:e.map((e,l)=>(0,n.jsx)("div",{className:"w-full h-full",children:(0,n.jsx)(g,{data:e,onAdd:h,onDelete:f})},l))}):(0,n.jsx)("div",{className:"h-full flex items-center justify-center text-2xl text-black",children:(0,n.jsx)("p",{children:"No JSON to display"})})}),"edit"===t&&(0,n.jsx)("div",{className:"w-full h-full",children:(0,n.jsx)(g,{onAdd:h})})]})]})]})]})}}},function(e){e.O(0,[834,971,23,744],function(){return e(e.s=1383)}),_N_E=e.O()}]);