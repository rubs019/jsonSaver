(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6272:function(e,l,t){Promise.resolve().then(t.bind(t,7642))},7642:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return m}});var n=t(7437),a=t(7138),s=t(2265);class r{save(e){let l=this.getAll();if(!l){console.log("No local storage returned");return}e.lastUpdated=new Date,l[e.id]=e,localStorage.setItem("json-saved",JSON.stringify(l))}get(e){let l=localStorage.getItem("json-saved");return l?JSON.parse(l)[e]||null:(console.log("No local storage returned"),null)}getAll(){try{let e=localStorage.getItem("json-saved");if(!e)return console.log("No item was founded"),null;return JSON.parse(e)}catch(e){return console.log(e),null}}delete(e){try{let l=localStorage.getItem("json-saved");if(!l){console.log("No item was founded");return}let t=JSON.parse(l);delete t[e],localStorage.setItem("json-saved",JSON.stringify(t))}catch(e){console.log(e);return}}}function d(e){let l={warning:"bg-orange-300 hover:bg-orange-500",success:"bg-green-300 hover:bg-green-500",primary:"bg-blue-300 hover:bg-blue-500",secondary:"bg-amber-300 hover:bg-amber-500",danger:"bg-red-300 hover:bg-red-500"}[e.type];return(0,n.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"p-3 w-full h-full rounded cursor transition ease-in-out text-white ".concat(l),children:e.children})}var i=t(6920),o=t(5664),c=t(3541);function u(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-row justify-between mb-2",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{children:e.data.title.length>24?e.data.title.slice(0,24)+"...":e.data.title}),(0,n.jsx)("div",{className:"overflow-scroll",children:(0,n.jsx)(c.he,{editable:!1,enableClipboard:!1,maxDisplayLength:1,displayDataTypes:!1,displaySize:!1,enableAdd:!1,enableDelete:!1,value:e.data.data})})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex gap-1 cursor-pointer",children:[(0,n.jsx)(i.G,{icon:o.Y}),"Edit"]}),e.data.lastUpdated&&(0,n.jsxs)("span",{className:"self-end text-xs",children:["Last updated : ",(console.log("showLastUpdate",e.data.lastUpdated),new Date(e.data.lastUpdated)).toISOString()]})]})]})})}function f(e){let[l,t]=s.useState(null),[a,r]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(e.values){let l=Object.entries(e.values).sort((e,l)=>(console.log("a",e[1].lastUpdated),console.log("b",l),e[1].lastUpdated<l[1].lastUpdated?1:-1)).map(e=>e[1]);console.log("result",l),r(l)}},[e.values]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"bg-gray-200",children:(0,n.jsx)("p",{className:"text-2xl m-4 h-10 text-black",children:"R\xe9cents"})}),(0,n.jsx)("div",{className:"bg-white text-gray-600 rounded p-4 h-2/3 overflow-scroll",children:(0,n.jsx)("div",{className:"",children:a.map((a,s)=>(0,n.jsx)("div",{className:"flex flex-col w-full mb-6 \n                     hover:bg-blue-200 hover:text-white\n                     ".concat(l===a.id?"bg-blue-300 text-white":""," \n                     cursor-pointer p-2 rounded"),onClick:()=>{t(a.id),e.onEditJson(a)},children:(0,n.jsx)(u,{data:a})},s))})})]})}function h(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"h-full w-full max-w-lg bg-gray-100 flex flex-col border-r border-r-gray-200",children:(0,n.jsx)(f,{values:e.values,onEditJson:l=>e.onEditJson(l)})})})}function v(e){let l=(0,s.useRef)(!1),a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{var l;null===(l=a.current)||void 0===l||l.update(e.data)},[e.data]),(0,s.useEffect)(()=>{t.e(658).then(t.t.bind(t,6194,23)).then(t=>{if(l.current)return;let n=t.default,s=document.getElementById("jsoneditor");if(!s){console.log("Could not find JSON Editor");return}a.current=new n(s,{mode:"code",onChange:async()=>{var l,t;let n=await (null===(l=a.current)||void 0===l?void 0:l.validate());if(n&&n.length>0){console.log("errors",n);return}e.onChange(null===(t=a.current)||void 0===t?void 0:t.get())}},e.data),l.current=!0})},[e]),(0,n.jsx)("div",{id:"jsoneditor",className:"w-full h-full"})}var x=t(2681);function g(e){new r;let l=(0,s.useRef)(null),t=(0,s.useRef)(null),[a,o]=(0,s.useState)({}),c=(0,s.useRef)(null),u=(0,s.useRef)(null);(0,s.useEffect)(()=>{var t;l.current&&(null===(t=e.data)||void 0===t?void 0:t.title)&&(l.current.value=e.data.title,o(e.data.data),c.current=e.data.id)},[e.data]),(0,s.useEffect)(()=>{"new"===e.mode&&f()},[e.mode]);let f=()=>{var e;t.current=null,o({}),(null===(e=l.current)||void 0===e?void 0:e.value)&&(l.current.value="")};return(0,n.jsxs)("div",{className:"h-full",children:[(0,n.jsx)("div",{className:"flex items-center justify-center text-2xl text-black ".concat(e.data||"new"===e.mode?"hidden":""),children:(0,n.jsx)("p",{children:"No JSON to display"})}),(0,n.jsxs)("div",{className:"".concat(e.data||"new"===e.mode?"":"hidden"," flex flex-col h-full"),children:[(0,n.jsxs)("div",{className:"flex text-black items-center justify-between h-14 mb-3 ",children:[(0,n.jsx)("span",{className:"text-xl",children:"Title"}),(0,n.jsx)("input",{onChange:e=>{var l,t,n;if(0===e.target.value.length){null===(t=u.current)||void 0===t||t.classList.remove("hidden");return}(null===(l=u.current)||void 0===l?void 0:l.classList.contains("hidden"))||null===(n=u.current)||void 0===n||n.classList.add("hidden")},ref:l,className:"w-2/4 border-none bg-gray-100 rounded h-full pl-3",type:"text",maxLength:200,placeholder:"Enter a new title"}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("div",{className:"w-24",children:(0,n.jsx)(d,{type:"primary",onClick:()=>{var n,s,r,d;if(!(null===(n=l.current)||void 0===n?void 0:n.value)){console.log("Title is required",l.current),null===(r=l.current)||void 0===r||r.focus(),null===(d=u.current)||void 0===d||d.classList.remove("hidden");return}let i=t.current||a;if(!i){console.log("Data is required",i);return}let o={id:c.current||crypto.randomUUID(),title:l.current.value,data:i};null===(s=e.onAdd)||void 0===s||s.call(e,o)},children:"Save"})}),(0,n.jsx)("div",{className:"w-24",children:(0,n.jsx)(d,{type:"danger",onClick:()=>{var l,t,n;if(!(null===(l=e.data)||void 0===l?void 0:l.id)){console.log("ID is required",null===(n=e.data)||void 0===n?void 0:n.id);return}null===(t=e.onDelete)||void 0===t||t.call(e,e.data.id.toString()),f()},children:(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(i.G,{icon:x.g8,size:"xl"}),"Delete"]})})})]})]}),(0,n.jsx)("div",{className:"my-3",children:(0,n.jsx)("p",{className:"bg-red-500 p-3 hidden",ref:u,children:"Title is required"})}),(0,n.jsx)("div",{className:"h-2/3",children:(0,n.jsx)(v,{data:"view"===e.mode?a:{},onChange:e=>{t.current=e}})})]})]})}function m(){let[e,l]=(0,s.useState)(null),[t,i]=(0,s.useState)("new"),[o,c]=(0,s.useState)(null),u=new r;(0,s.useEffect)(()=>{f()});let f=()=>{let e=u.getAll();e&&c(e)};return(0,n.jsxs)("main",{children:[(0,n.jsxs)("nav",{className:"py-2 border-b border-gray-200 pr-12 flex items-center gap-12 justify-end w-full bg-white",children:[(0,n.jsx)(a.default,{href:"/",className:"text-black",children:"Home"}),(0,n.jsx)("div",{className:"w-64",children:(0,n.jsx)(d,{type:"primary",onClick:()=>i("new"),children:"Create a new json"})})]}),(0,n.jsxs)("div",{className:"flex h-full",children:[(0,n.jsx)(h,{values:o,updateCurrentStatus:e=>i(e),onEditJson:e=>(function(e){if(!e){console.log("No item to display");return}i("view"),l(e)})(e)}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"bg-gray-500 w-full",children:(0,n.jsx)("h1",{className:"text-white text-center text-4xl",children:"JSON Saver"})}),(0,n.jsx)("div",{className:"p-3 h-full",children:(0,n.jsx)(g,{mode:t,data:e,onAdd:e=>{u.save(e),f()},onDelete:e=>{u.delete(e),f()}})})]})]})]})}}},function(e){e.O(0,[834,971,23,744],function(){return e(e.s=6272)}),_N_E=e.O()}]);